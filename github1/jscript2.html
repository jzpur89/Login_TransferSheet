<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Test Transfer</title>
    <link rel="stylesheet" href="cssjs2.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.2.0/js/all.js" integrity="sha384-4oV5EgaV02iISL2ban6c/RmotsABqE4yZxZLcYMAdG7FAPsyHYAPpywE9PJo+Khy" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="topOfPage" class="wrapper">

      <!-- Pharmacists On Duty -->

      <section class="pharmacists">
        <div class="header-wrap">
            <p><i class="fas fa-user" id="icons"></i><span>ALISAL PHARMACIST ON DUTY</span><i class="fas fa-user" id="icons"></i></p>
        </div>
        <div class="pharmacist-box">
          <div class="pharmacist-grid">
            <div class="content-wrap">
              <select id="pharmacist" name="pharmacist">
                <option>TUNG</option>
                <option>AKIRA</option>
                <option>JESSE</option>
                <option>OTHER</option>
              </select>
              <div class="" id="pharmacist-input3">
                <p id="pharmacist-input1">PHARMACIST NAME</p>
                <input id="pharmacist-input2" type="text" name="ohterpharmacist-input" value="">
                <span id="pharmacist-warn"><i class="fas fa-exclamation-circle"></i></span>
              </div>
            </div>
          </div>
        </div>
      </section>

<hr>

      <!-- Patient Information -->
      <div class="header-wrap">
        <p><i class="fas fa-address-card" id="icons"></i><span>PATIENT INFORMATION</span><i class="fas fa-address-card" id="icons"></i></p>
      </div>
      <div class="patient-form">
        <div id="fName-grid" class="form-group">
          <label id="fNameHtml" for="">FIRST NAME</label>
          <input id="fName" type="text" name="First Name" maxlength="30" placeholder="First Name" onkeydown="return alphaOnly(event)">
          <span id="fNameIcon"><i class="fas fa-exclamation-circle"></i></span>
        </div>
        <div id="lName-grid" class="form-group">
            <label id="lNameHtml" for="">LAST NAME</label>
            <input id="lName" type="text" name="Last Name" maxlength="30" placeholder="Last Name" onkeydown="return alphaOnly(event)">
            <span id="lNameIcon"><i class="fas fa-exclamation-circle"></i></span>
        </div>
        <div id="dateOB-grid" class="form-group">
            <label id="dateOBHtml">DATE OF BIRTH</label>
            <input id="dateOB" type="date" name="Date Of Birth">
            <span id="dateOBIcon"><i class="fas fa-exclamation-circle"></i></span>
        </div>
      </div>

<hr>

      <!-- Pharmacy Transfering From -->

    <section class="pharmacylist">
      <div class="header-wrap">
          <p><i class="fas fa-building" id="icons"></i><span>TRANSFERRING PHARMACY</span><i class="fas fa-building" id="icons"></i></p>
      </div>

      <div class="transferIcon1">
        <span id="transferIcon1"><i class="fas fa-exclamation-circle"></i></span>
      </div>

      <ul>
        <li>
          <input type="radio" id="ANOP" name="pharmacies" class="required" value="ANOP">
          <label for="ANOP">A&O</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" class="required" value="ACP">
          <label for="ACP">ALLCARE</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="CVS1">
          <label for="CVS1">CVS (EAST LAUREL)</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="CVS2">
          <label for="cvs1">CVS (SOUTH MAIN)</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="CVS3">
          <label for="CVS2">CVS (EAST ALISAL)</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="CVS4">
          <label for="CVS3">CVS (EAST BORONDA)</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="CVS5">
          <label for="CVS4">CVS-TARGET (NORTH MAIN)</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="NHP">
          <label for="NHP">NOB HILL</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="RITEAID">
          <label for="RITEAID">RITE AID</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="RLP">
          <label for="RLP">ROMIE LANE</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="SAFEWAY1">
          <label for="SAFEWAY1">SAFEWAY (CONSTITUTION)</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="SAFEWAY2">
          <label for="SAFEWAY2">SAFEWAY (NORTH MAIN)</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="SHERMANP">
          <label for="SHERMANp">SHERMAN'S</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="STARP">
          <label for="STARP">STAR</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="WAG1">
          <label for="WAG1">WALGREENS (NORTH MAIN)</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="WAG2">
          <label for="WAG2">WALGREENS (NORTH SANBORN)</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="WAL1">
          <label for="WAL1">WALMART (NORTH DAVIS)</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="WAL2">
          <label for="WAL2">WALMART (NORTH MAIN)</label>
        </li>
        <li>
          <input type="radio" name="pharmacies" value="OTHERP">
          <label for="OTHERP">OTHER</label>
        </li>
        <li id="otherpharmacy-input">
          <div class="transferIcon2">
            <span id="transferIcon2"><i class="fas fa-exclamation-circle"></i></span>
          </div>
          <p>Pharmacy Name</p>
          <input id="opharmacyName" type="text" name="" value="" placeholder="Required">
          <p>Pharmacy Address</p>
          <input id="opharmacyAddress" type="text" name="" value="" placeholder="Optional">
          <p>Pharmacy PHONE</p>
          <input id="opharmacyPhone" type="number" name="" value="" placeholder="Optional Ex: 8314247321">
          <p>Pharmacy Fax</p>
          <input id="opharmacyFax" type="number" name="" value="" placeholder="Required Ex: 8314240197">
        </li>
      </ul>
    </section>

<hr>

      <!-- Medications Requested -->

      <div class="header-wrap">
        <p><i class="fas fa-prescription-bottle" id="icons"></i><span>PRESCRIPTION(S) REQUESTED</span><i class="fas fa-prescription-bottle" id="icons"></i></p>
      </div>

      <div class="medReqIcon1">
        <span id="medReqIcon1"><i class="fas fa-exclamation-circle"></i></span>
      </div>

      <div class="medication-grid">
        <div class="">
          <input type="radio" name="medications" value="" checked>
          <label>ALL ACTIVE PRESCRIPTION(S) DURING LAST 3 MONTHS</label>
        </div>

        <div class="">
          <span class="meditem2">
            <input id="medOther" type="radio" name="medications">
            <label>OTHER</label>
          </span>
          <span>
            <textarea id="medTextBox" name="name" maxlength="300" placeholder="Type in specific medications here"></textarea>
          </span>
        </div>
      </div>

<hr>

      <!-- Additional Notes -->

      <div class="header-wrap">
        <p><i class="far fa-sticky-note" id="icons"></i><span>NOTES</span><i class="far fa-sticky-note" id="icons"></i></p>
      </div>

      <div class="notes-grid">
        <div class="">
          <textarea id="notesTextBox" name="name" maxlength="300" placeholder="Add any additional notes here"></textarea>
        </div>
      </div>
      <!-- Submit Button -->
      <br>
      <div class="button-container">
        <button id="button" onclick="validateForm()">Create Transfer Sheet</button>

      <button id="button1" onclick="validateForm()">Submit</button>

      <!-- Javascripts/CODES -->

    <script>

        $('#pharmacist').change(function(){
          if($('#pharmacist').val() == 'OTHER'){
            $('#pharmacist-input1').show();
            $('#pharmacist-input2').show();
          } else {
            $('#pharmacist-input1').hide();
            $('#pharmacist-input2').hide();
          }
        })

        $('input[name="pharmacies"]').change(function(){
          if($('input[name="pharmacies"]:checked').val() == "OTHERP"){
            $('#otherpharmacy-input').show();
          } else {
            $('#otherpharmacy-input').hide();
          }
        })


        function validateForm(){
          var rFields = "";
          var rpFields = 0;
          if($('#pharmacist').val() == 'OTHER'){
            var otherPharmacist = $('#pharmacist-input2').val().trim();
            if(otherPharmacist == null || otherPharmacist == ""){
              rFields += "\nPharmacist Name";
              $('#pharmacist-warn').show();
            } else {
              $('#pharmacist-warn').hide();
            }
          }
          var fName = $('input#fName').val().toUpperCase().trim();
          if(fName == null || fName == ""){
            rFields += "\nFirst Name";
            $('#fNameIcon').show();
          } else {
            $('#fNameIcon').hide();
          }
          var lName = $('input#lName').val().toUpperCase().trim();
          if(lName == null || lName == ""){
            rFields += "\nLast Name";
            $('#lNameIcon').show();
          } else {
            $('#lNameIcon').hide();
          }
          var dateOB = $('input#dateOB').val();
          if(!dateOB){
            rFields += "\nDate of Birth";
            $('#dateOBIcon').show();
          } else {
            $('#dateOBIcon').hide();
          }
          if($('input[name=pharmacies]:checked').length <= 0){
            rFields += "\nTransfering Pharmacy";
            rpFields += 1;
            $('#transferIcon1').show();
          } else {
            $('#transferIcon1').hide();
          }
          var pharmTransfer = $('input[name="pharmacies"]:checked').val();
          if(pharmTransfer == "OTHERP"){
            var opharmacyName = $('#opharmacyName').val().trim();
            if(opharmacyName == null || opharmacyName == ""){
              rFields += "\nPharmacy Name";
              rpFields += 1;
            }
            var opharmacyPhone = $('#opharmacyPhone').val().trim();
            if(opharmacyPhone.trim().length >= 1){
              if(opharmacyPhone.trim().length != 10){
                rFields += "\nValid Pharmacy Phone";
                rpFields += 1;
              }
              if(opharmacyPhone.trim().length == 10){
                var phone = formatPhone(opharmacyPhone);
                localStorage.setItem("opharmacyPhone", phone); //collect and store phone here
              }
            }
            var opharmacyFax = $('#opharmacyFax').val().trim();
            if(opharmacyFax.trim().length == 0){
              rFields += "\nPharmacy Fax Number";
              rpFields += 1;
            }
            if(opharmacyFax.trim().length >= 1){
              if(opharmacyFax.trim().length != 10){
                rFields += "\nValid Pharmacy Fax";
                rpFields += 1;
              }
              if(opharmacyFax.trim().length == 10){
                var fax = formatPhone(opharmacyFax);
                localStorage.setItem("opharmacyFax", fax);//collect and store fax here
              }
            }
          }
          if($('#medOther').is(':checked') == true){
            var medOther1 = $('#medTextBox').val().trim();
            if(medOther1 == null || medOther1 == ""){
              rFields += "\nSpecify Prescriptions For Transfer";
              $('#medReqIcon1').show();
            } else {
              $('#medReqIcon1').hide();
            }
          }
          if(rFields == null || rFields == ""){
            grabData();
          } else if(rFields != null || rFields != ""){
            alert("Missing Required Fields:" + rFields);
            window.location = "#topOfPage"
          }
          if(rpFields >= 1){
            $('#transferIcon1').show();
            $('#transferIcon2').show();
          } else {
            $('#transferIcon1').hide();
            $('#transferIcon2').hide();
          }
        }

        function formatPhone(x){
          var areaCode = x.slice(0, 3);
          var first3 = x.slice(3, 6);
          var last4 = x.slice(6, 11);
          var phone = "(" + areaCode + ") " + first3 + "-" + last4;
          return phone;
        }

        //Check Radio Button Selected For Pharmacies//
        function pharmacyCheck(){
          if($('input[name="pharmacies"]').is(':checked') == true){
            var pharmTransfer = $('input[name="pharmacies"]:checked').val();
            localStorage.setItem("pharmTransfer", pharmTransfer);
            if(pharmTransfer == "OTHERP"){
              var opharmacyName = $('#opharmacyName').val().toUpperCase();
              var opharmacyAddress = $('#opharmacyAddress').val();
              localStorage.setItem("opharmacyName", opharmacyName);
              localStorage.setItem("opharmacyAddress", opharmacyAddress);
            }
          }
        }

        //Check Radio Button Selected For Medications//
        function medicationCheck(){
          if($('#medOther').is(':checked') == true){
            var medOther = $("#medTextBox").val().toUpperCase();
            localStorage.setItem("medOther", medOther);
          } else {
            var medOther = "ALL ACTIVE PRESCRIPTION(S) DURING THE LAST 3 MONTHS";
            localStorage.setItem("medOther", medOther);
          }
        }

        //Check Pharmacist Selected//
        function pharmacistCheck(){
          var pharmacist = $('#pharmacist option:selected').text();
          if(pharmacist == "OTHER"){
            var pharmacist = $('#pharmacist-input2').val().toUpperCase();
          }
          localStorage.setItem("pharmacist", pharmacist);
        }

        function alphaOnly(event){
          var key = event.keyCode;
          return ((key >= 65 && key <= 90) || key == 8 || key == 9 || key == 32 || key == 46);
        }

        function grabData(){
          var fName = $('input#fName').val().toUpperCase();
          var lName = $('input#lName').val().toUpperCase();
          var dateOB = $('input#dateOB').val();
          var splitDOB = dateOB.split('-');
          var dateOB2 = splitDOB[1] + '-' + splitDOB[2] + '-' + splitDOB[0];
          var fullName = (lName + ', ' + fName);
          var notes1 = $("#notesTextBox").val();
          medicationCheck();
          pharmacyCheck();
          pharmacistCheck();
          localStorage.setItem("fName", fName);
          localStorage.setItem("lName", lName);
          localStorage.setItem("fullName", fullName);
          localStorage.setItem("dateOB2", dateOB2);
          localStorage.setItem("notes1", notes1);
          alert("Creating Transfer Sheet For "  + fullName);
          window.open("jscript1.html", "_blank")
        }

        function hideOtherFields(){
          $('#pharmacist-input1').hide();
          $('#pharmacist-input2').hide();
          $('#otherpharmacy-input').hide();
          $('#pharmacist-warn').hide();
          $('#fNameIcon').hide();
          $('#lNameIcon').hide();
          $('#dateOBIcon').hide();
          $('#transferIcon1').hide();
          $('#transferIcon2').hide();
          $('#medReqIcon1').hide();
          $('#button1').hide();
        }

        window.onload = hideOtherFields();

    </script>

    <!-- Code Ends -->

  </div>

    <!-- Wrapper Ends -->

  </body>

</html>
